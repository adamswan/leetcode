<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      let nums = [-2, 1, -3, 4, -1, 2, 1, -5, 4];
      // 输出：6
      // 解释：连续子数组 [4,-1,2,1] 的和最大，为 6

      function getval(arr) {
        let max = arr[0]; // 假定最大和
        let currentSum = arr[0]; // 当前累加和

        // 从第2个成员开始遍历，因为第1个成员已经是假定值了
        for (let i = 1; i < arr.length; i++) {
          let item = arr[i];

          // 累加
          currentSum = currentSum + item;

          // 成员有负数，所以可能出现越加越小的情况
          // 如果当前累加和小于当前成员，就将当前成员赋值为当前累加和
          if (item > currentSum) {
            currentSum = item;
          }

          // 更新假定最大和
          if (currentSum > max) {
            max = currentSum;
          }
        }

        return max;
      }

      console.log(getval(nums));
    </script>
  </body>
</html>
